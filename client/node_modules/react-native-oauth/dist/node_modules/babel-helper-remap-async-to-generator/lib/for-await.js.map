{"version":3,"sources":["../../../../node_modules/babel-helper-remap-async-to-generator/lib/for-await.js"],"names":["exports","__esModule","default","path","helpers","node","scope","parent","stepKey","generateUidIdentifier","stepValue","left","declar","t","isIdentifier","isPattern","isMemberExpression","expressionStatement","assignmentExpression","isVariableDeclaration","variableDeclaration","kind","variableDeclarator","declarations","id","template","buildForAwait","_babelTraverse2","forAwaitVisitor","ITERATOR_HAD_ERROR_KEY","ITERATOR_COMPLETION","ITERATOR_ERROR_KEY","ITERATOR_KEY","GET_ITERATOR","getAsyncIterator","OBJECT","right","STEP_VALUE","STEP_KEY","AWAIT","wrapAwait","body","isLabeledParent","isLabeledStatement","tryBody","block","loop","labeledStatement","label","replaceParent","_babelTypes","require","_interopRequireWildcard","_babelTemplate","_babelTemplate2","_interopRequireDefault","_babelTraverse","obj","newObj","key","Object","prototype","hasOwnProperty","call","noScope","Identifier","replacements","name","replaceInline","CallExpression","callee","replaceWith","arguments","module"],"mappings":"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","file":"for-await.js","sourcesContent":["\"use strict\";\n\nexports.__esModule = true;\n\nexports.default = function (path, helpers) {\n  var node = path.node,\n      scope = path.scope,\n      parent = path.parent;\n\n\n  var stepKey = scope.generateUidIdentifier(\"step\");\n  var stepValue = scope.generateUidIdentifier(\"value\");\n  var left = node.left;\n  var declar = void 0;\n\n  if (t.isIdentifier(left) || t.isPattern(left) || t.isMemberExpression(left)) {\n    declar = t.expressionStatement(t.assignmentExpression(\"=\", left, stepValue));\n  } else if (t.isVariableDeclaration(left)) {\n    declar = t.variableDeclaration(left.kind, [t.variableDeclarator(left.declarations[0].id, stepValue)]);\n  }\n\n  var template = buildForAwait();\n\n  (0, _babelTraverse2.default)(template, forAwaitVisitor, null, {\n    ITERATOR_HAD_ERROR_KEY: scope.generateUidIdentifier(\"didIteratorError\"),\n    ITERATOR_COMPLETION: scope.generateUidIdentifier(\"iteratorNormalCompletion\"),\n    ITERATOR_ERROR_KEY: scope.generateUidIdentifier(\"iteratorError\"),\n    ITERATOR_KEY: scope.generateUidIdentifier(\"iterator\"),\n    GET_ITERATOR: helpers.getAsyncIterator,\n    OBJECT: node.right,\n    STEP_VALUE: stepValue,\n    STEP_KEY: stepKey,\n    AWAIT: helpers.wrapAwait\n  });\n\n  template = template.body.body;\n\n  var isLabeledParent = t.isLabeledStatement(parent);\n  var tryBody = template[3].block.body;\n  var loop = tryBody[0];\n\n  if (isLabeledParent) {\n    tryBody[0] = t.labeledStatement(parent.label, loop);\n  }\n\n  return {\n    replaceParent: isLabeledParent,\n    node: template,\n    declar: declar,\n    loop: loop\n  };\n};\n\nvar _babelTypes = require(\"babel-types\");\n\nvar t = _interopRequireWildcard(_babelTypes);\n\nvar _babelTemplate = require(\"babel-template\");\n\nvar _babelTemplate2 = _interopRequireDefault(_babelTemplate);\n\nvar _babelTraverse = require(\"babel-traverse\");\n\nvar _babelTraverse2 = _interopRequireDefault(_babelTraverse);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nvar buildForAwait = (0, _babelTemplate2.default)(\"\\n  function* wrapper() {\\n    var ITERATOR_COMPLETION = true;\\n    var ITERATOR_HAD_ERROR_KEY = false;\\n    var ITERATOR_ERROR_KEY = undefined;\\n    try {\\n      for (\\n        var ITERATOR_KEY = GET_ITERATOR(OBJECT), STEP_KEY, STEP_VALUE;\\n        (\\n          STEP_KEY = yield AWAIT(ITERATOR_KEY.next()),\\n          ITERATOR_COMPLETION = STEP_KEY.done,\\n          STEP_VALUE = yield AWAIT(STEP_KEY.value),\\n          !ITERATOR_COMPLETION\\n        );\\n        ITERATOR_COMPLETION = true) {\\n      }\\n    } catch (err) {\\n      ITERATOR_HAD_ERROR_KEY = true;\\n      ITERATOR_ERROR_KEY = err;\\n    } finally {\\n      try {\\n        if (!ITERATOR_COMPLETION && ITERATOR_KEY.return) {\\n          yield AWAIT(ITERATOR_KEY.return());\\n        }\\n      } finally {\\n        if (ITERATOR_HAD_ERROR_KEY) {\\n          throw ITERATOR_ERROR_KEY;\\n        }\\n      }\\n    }\\n  }\\n\");\n\nvar forAwaitVisitor = {\n  noScope: true,\n\n  Identifier: function Identifier(path, replacements) {\n    if (path.node.name in replacements) {\n      path.replaceInline(replacements[path.node.name]);\n    }\n  },\n  CallExpression: function CallExpression(path, replacements) {\n    var callee = path.node.callee;\n\n    if (t.isIdentifier(callee) && callee.name === \"AWAIT\" && !replacements.AWAIT) {\n      path.replaceWith(path.node.arguments[0]);\n    }\n  }\n};\n\nmodule.exports = exports[\"default\"];"]}