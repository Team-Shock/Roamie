{"version":3,"sources":["../../../node_modules/browserslist/node.js"],"names":["region","require","default","path","fs","BrowserslistError","IS_SECTION","CONFIG_PATTERN","SCOPED_CONFIG__PATTERN","FORMAT","filenessCache","configCache","checkExtend","name","use","test","indexOf","isFile","file","result","existsSync","statSync","process","env","BROWSERSLIST_DISABLE_CACHE","eachParent","callback","loc","resolve","dirname","undefined","check","section","Array","isArray","i","length","pickEnv","config","opts","BROWSERSLIST_ENV","NODE_ENV","defaults","parsePackage","JSON","parse","readFileSync","browserlist","browserslist","list","module","exports","loadQueries","context","dangerousExtend","queries","paths","getStat","stats","BROWSERSLIST_STATS","dir","join","e","dataByBrowser","loadConfig","BROWSERSLIST","BROWSERSLIST_CONFIG","basename","readConfig","findConfig","loadCountry","usage","country","code","replace","compressed","data","j","parseConfig","string","sections","toString","split","map","line","trim","filter","forEach","match","push","from","cacheKey","resolved","pkg","rc","pkgBrowserslist","console","warn","clearCaches"],"mappings":"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","file":"node.js","sourcesContent":["var region = require('caniuse-lite/dist/unpacker/region').default\nvar path = require('path')\nvar fs = require('fs')\n\nvar BrowserslistError = require('./error')\n\nvar IS_SECTION = /^\\s*\\[(.+)\\]\\s*$/\nvar CONFIG_PATTERN = /^browserslist-config-/\nvar SCOPED_CONFIG__PATTERN = /@[^./]+\\/browserslist-config(-|$)/\nvar FORMAT = 'Browserslist config should be a string or an array ' +\n             'of strings with browser queries'\n\nvar filenessCache = { }\nvar configCache = { }\n\nfunction checkExtend (name) {\n  var use = ' Use `dangerousExtend` option to disable.'\n  if (!CONFIG_PATTERN.test(name) && !SCOPED_CONFIG__PATTERN.test(name)) {\n    throw new BrowserslistError(\n      'Browserslist config needs `browserslist-config-` prefix. ' + use)\n  }\n  if (name.indexOf('.') !== -1) {\n    throw new BrowserslistError(\n      '`.` not allowed in Browserslist config name. ' + use)\n  }\n  if (name.indexOf('node_modules') !== -1) {\n    throw new BrowserslistError(\n      '`node_modules` not allowed in Browserslist config.' + use)\n  }\n}\n\nfunction isFile (file) {\n  if (file in filenessCache) {\n    return filenessCache[file]\n  }\n  var result = fs.existsSync(file) && fs.statSync(file).isFile()\n  if (!process.env.BROWSERSLIST_DISABLE_CACHE) {\n    filenessCache[file] = result\n  }\n  return result\n}\n\nfunction eachParent (file, callback) {\n  var loc = path.resolve(file)\n  do {\n    var result = callback(loc)\n    if (typeof result !== 'undefined') return result\n  } while (loc !== (loc = path.dirname(loc)))\n  return undefined\n}\n\nfunction check (section) {\n  if (Array.isArray(section)) {\n    for (var i = 0; i < section.length; i++) {\n      if (typeof section[i] !== 'string') {\n        throw new BrowserslistError(FORMAT)\n      }\n    }\n  } else if (typeof section !== 'string') {\n    throw new BrowserslistError(FORMAT)\n  }\n}\n\nfunction pickEnv (config, opts) {\n  if (typeof config !== 'object') return config\n\n  var name\n  if (typeof opts.env === 'string') {\n    name = opts.env\n  } else if (process.env.BROWSERSLIST_ENV) {\n    name = process.env.BROWSERSLIST_ENV\n  } else if (process.env.NODE_ENV) {\n    name = process.env.NODE_ENV\n  } else {\n    name = 'production'\n  }\n\n  return config[name] || config.defaults\n}\n\nfunction parsePackage (file) {\n  var config = JSON.parse(fs.readFileSync(file))\n  if (config.browserlist && !config.browserslist) {\n    throw new BrowserslistError(\n      '`browserlist` key instead of `browserslist` in ' + file)\n  }\n  var list = config.browserslist\n  if (Array.isArray(list)) {\n    list = { defaults: list }\n  }\n\n  for (var i in list) {\n    check(list[i])\n  }\n\n  return list\n}\n\nmodule.exports = {\n  loadQueries: function loadQueries (context, name) {\n    if (!context.dangerousExtend) checkExtend(name)\n    // eslint-disable-next-line security/detect-non-literal-require\n    var queries = require(require.resolve(name, { paths: ['.'] }))\n    if (!Array.isArray(queries)) {\n      throw new BrowserslistError(\n        '`' + name + '` config exports not an array of queries')\n    }\n    return queries\n  },\n\n  getStat: function getStat (opts) {\n    var stats\n    if (opts.stats) {\n      stats = opts.stats\n    } else if (process.env.BROWSERSLIST_STATS) {\n      stats = process.env.BROWSERSLIST_STATS\n    } else if (opts.path && path.resolve && fs.existsSync) {\n      stats = eachParent(opts.path, function (dir) {\n        var file = path.join(dir, 'browserslist-stats.json')\n        return isFile(file) ? file : undefined\n      })\n    }\n\n    if (typeof stats === 'string') {\n      try {\n        stats = JSON.parse(fs.readFileSync(stats))\n      } catch (e) {\n        throw new BrowserslistError('Can\\'t read ' + stats)\n      }\n    }\n\n    if (stats && 'dataByBrowser' in stats) {\n      stats = stats.dataByBrowser\n    }\n\n    return stats\n  },\n\n  loadConfig: function loadConfig (opts) {\n    if (process.env.BROWSERSLIST) {\n      return process.env.BROWSERSLIST\n    } else if (opts.config || process.env.BROWSERSLIST_CONFIG) {\n      var file = opts.config || process.env.BROWSERSLIST_CONFIG\n      if (path.basename(file) === 'package.json') {\n        return pickEnv(parsePackage(file), opts)\n      } else {\n        return pickEnv(module.exports.readConfig(file), opts)\n      }\n    } else if (opts.path) {\n      return pickEnv(module.exports.findConfig(opts.path), opts)\n    } else {\n      return undefined\n    }\n  },\n\n  loadCountry: function loadCountry (usage, country) {\n    var code = country.replace(/[^\\w-]/g, '')\n    if (!usage[code]) {\n      // eslint-disable-next-line security/detect-non-literal-require\n      var compressed = require('caniuse-lite/data/regions/' + code + '.js')\n      var data = region(compressed)\n      usage[country] = { }\n      for (var i in data) {\n        for (var j in data[i]) {\n          usage[country][i + ' ' + j] = data[i][j]\n        }\n      }\n    }\n  },\n\n  parseConfig: function parseConfig (string) {\n    var result = { defaults: [] }\n    var sections = ['defaults']\n\n    string.toString()\n      .replace(/#[^\\n]*/g, '')\n      .split(/\\n/)\n      .map(function (line) {\n        return line.trim()\n      })\n      .filter(function (line) {\n        return line !== ''\n      })\n      .forEach(function (line) {\n        if (IS_SECTION.test(line)) {\n          sections = line.match(IS_SECTION)[1].trim().split(' ')\n          sections.forEach(function (section) {\n            if (result[section]) {\n              throw new BrowserslistError(\n                'Dublicate section ' + section + ' in Browserslist config')\n            }\n            result[section] = []\n          })\n        } else {\n          sections.forEach(function (section) {\n            result[section].push(line)\n          })\n        }\n      })\n\n    return result\n  },\n\n  readConfig: function readConfig (file) {\n    if (!isFile(file)) {\n      throw new BrowserslistError('Can\\'t read ' + file + ' config')\n    }\n    return module.exports.parseConfig(fs.readFileSync(file))\n  },\n\n  findConfig: function findConfig (from) {\n    from = path.resolve(from)\n\n    var cacheKey = isFile(from) ? path.dirname(from) : from\n    if (cacheKey in configCache) {\n      return configCache[cacheKey]\n    }\n\n    var resolved = eachParent(from, function (dir) {\n      var config = path.join(dir, 'browserslist')\n      var pkg = path.join(dir, 'package.json')\n      var rc = path.join(dir, '.browserslistrc')\n\n      var pkgBrowserslist\n      if (isFile(pkg)) {\n        try {\n          pkgBrowserslist = parsePackage(pkg)\n        } catch (e) {\n          if (e.name === 'BrowserslistError') throw e\n          console.warn(\n            '[Browserslist] Could not parse ' + pkg + '. Ignoring it.')\n        }\n      }\n\n      if (isFile(config) && pkgBrowserslist) {\n        throw new BrowserslistError(\n          dir + ' contains both browserslist and package.json with browsers')\n      } else if (isFile(rc) && pkgBrowserslist) {\n        throw new BrowserslistError(\n          dir + ' contains both .browserslistrc and package.json with browsers')\n      } else if (isFile(config) && isFile(rc)) {\n        throw new BrowserslistError(\n          dir + ' contains both .browserslistrc and browserslist')\n      } else if (isFile(config)) {\n        return module.exports.readConfig(config)\n      } else if (isFile(rc)) {\n        return module.exports.readConfig(rc)\n      } else {\n        return pkgBrowserslist\n      }\n    })\n    if (!process.env.BROWSERSLIST_DISABLE_CACHE) {\n      configCache[cacheKey] = resolved\n    }\n    return resolved\n  },\n\n  clearCaches: function clearCaches () {\n    filenessCache = { }\n    configCache = { }\n  }\n}\n"]}