{"version":3,"sources":["../../../../node_modules/core-js/modules/_collection-weak.js"],"names":["redefineAll","require","getWeak","anObject","isObject","anInstance","forOf","createArrayMethod","$has","validate","arrayFind","arrayFindIndex","id","uncaughtFrozenStore","that","_l","UncaughtFrozenStore","a","findUncaughtFrozen","store","key","it","prototype","get","entry","has","set","value","push","index","splice","module","exports","getConstructor","wrapper","NAME","IS_MAP","ADDER","C","iterable","_t","_i","undefined","data","def","ufstore"],"mappings":"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","file":"_collection-weak.js","sourcesContent":["'use strict';\nvar redefineAll = require('./_redefine-all');\nvar getWeak = require('./_meta').getWeak;\nvar anObject = require('./_an-object');\nvar isObject = require('./_is-object');\nvar anInstance = require('./_an-instance');\nvar forOf = require('./_for-of');\nvar createArrayMethod = require('./_array-methods');\nvar $has = require('./_has');\nvar validate = require('./_validate-collection');\nvar arrayFind = createArrayMethod(5);\nvar arrayFindIndex = createArrayMethod(6);\nvar id = 0;\n\n// fallback for uncaught frozen keys\nvar uncaughtFrozenStore = function (that) {\n  return that._l || (that._l = new UncaughtFrozenStore());\n};\nvar UncaughtFrozenStore = function () {\n  this.a = [];\n};\nvar findUncaughtFrozen = function (store, key) {\n  return arrayFind(store.a, function (it) {\n    return it[0] === key;\n  });\n};\nUncaughtFrozenStore.prototype = {\n  get: function (key) {\n    var entry = findUncaughtFrozen(this, key);\n    if (entry) return entry[1];\n  },\n  has: function (key) {\n    return !!findUncaughtFrozen(this, key);\n  },\n  set: function (key, value) {\n    var entry = findUncaughtFrozen(this, key);\n    if (entry) entry[1] = value;\n    else this.a.push([key, value]);\n  },\n  'delete': function (key) {\n    var index = arrayFindIndex(this.a, function (it) {\n      return it[0] === key;\n    });\n    if (~index) this.a.splice(index, 1);\n    return !!~index;\n  }\n};\n\nmodule.exports = {\n  getConstructor: function (wrapper, NAME, IS_MAP, ADDER) {\n    var C = wrapper(function (that, iterable) {\n      anInstance(that, C, NAME, '_i');\n      that._t = NAME;      // collection type\n      that._i = id++;      // collection id\n      that._l = undefined; // leak store for uncaught frozen objects\n      if (iterable != undefined) forOf(iterable, IS_MAP, that[ADDER], that);\n    });\n    redefineAll(C.prototype, {\n      // 23.3.3.2 WeakMap.prototype.delete(key)\n      // 23.4.3.3 WeakSet.prototype.delete(value)\n      'delete': function (key) {\n        if (!isObject(key)) return false;\n        var data = getWeak(key);\n        if (data === true) return uncaughtFrozenStore(validate(this, NAME))['delete'](key);\n        return data && $has(data, this._i) && delete data[this._i];\n      },\n      // 23.3.3.4 WeakMap.prototype.has(key)\n      // 23.4.3.4 WeakSet.prototype.has(value)\n      has: function has(key) {\n        if (!isObject(key)) return false;\n        var data = getWeak(key);\n        if (data === true) return uncaughtFrozenStore(validate(this, NAME)).has(key);\n        return data && $has(data, this._i);\n      }\n    });\n    return C;\n  },\n  def: function (that, key, value) {\n    var data = getWeak(anObject(key), true);\n    if (data === true) uncaughtFrozenStore(that).set(key, value);\n    else data[that._i] = value;\n    return that;\n  },\n  ufstore: uncaughtFrozenStore\n};\n"]}