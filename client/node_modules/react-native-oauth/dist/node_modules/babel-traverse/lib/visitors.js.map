{"version":3,"sources":["../../../../node_modules/babel-traverse/lib/visitors.js"],"names":["exports","__esModule","_typeof2","require","_typeof3","_interopRequireDefault","_keys","_keys2","_getIterator2","_getIterator3","explode","verify","merge","_virtualTypes","virtualTypes","_interopRequireWildcard","_babelMessages","messages","_babelTypes","t","_clone","_clone2","obj","newObj","key","Object","prototype","hasOwnProperty","call","default","visitor","_exploded","nodeType","shouldIgnoreKey","parts","split","length","fns","_iterator","_isArray","Array","isArray","_i","_ref","next","done","value","part","ensureEntranceObjects","ensureCallbackArrays","_iterator2","_isArray2","_i2","_ref2","_nodeType3","wrapper","_fns2","type","wrapCheck","types","_iterator4","_isArray4","_i4","_ref4","_type","mergePair","_nodeType","_fns","aliases","FLIPPED_ALIAS_KEYS","deprecratedKey","DEPRECATED_KEYS","console","trace","_iterator3","_isArray3","_i3","_ref3","alias","existing","_nodeType2","_verified","Error","get","validateVisitorMethods","TYPES","indexOf","visitors","visitorKey","path","val","concat","_iterator5","_isArray5","_i5","_ref5","fn","TypeError","states","arguments","undefined","rootVisitor","i","state","visitorType","wrapWithStateOrWrapper","nodeVisitor","oldVisitor","newVisitor","_loop","map","newFn","_ret","enter","exit","checkPath","apply","toString","dest","src"],"mappings":"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","file":"visitors.js","sourcesContent":["\"use strict\";\n\nexports.__esModule = true;\n\nvar _typeof2 = require(\"babel-runtime/helpers/typeof\");\n\nvar _typeof3 = _interopRequireDefault(_typeof2);\n\nvar _keys = require(\"babel-runtime/core-js/object/keys\");\n\nvar _keys2 = _interopRequireDefault(_keys);\n\nvar _getIterator2 = require(\"babel-runtime/core-js/get-iterator\");\n\nvar _getIterator3 = _interopRequireDefault(_getIterator2);\n\nexports.explode = explode;\nexports.verify = verify;\nexports.merge = merge;\n\nvar _virtualTypes = require(\"./path/lib/virtual-types\");\n\nvar virtualTypes = _interopRequireWildcard(_virtualTypes);\n\nvar _babelMessages = require(\"babel-messages\");\n\nvar messages = _interopRequireWildcard(_babelMessages);\n\nvar _babelTypes = require(\"babel-types\");\n\nvar t = _interopRequireWildcard(_babelTypes);\n\nvar _clone = require(\"lodash/clone\");\n\nvar _clone2 = _interopRequireDefault(_clone);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction explode(visitor) {\n  if (visitor._exploded) return visitor;\n  visitor._exploded = true;\n\n  for (var nodeType in visitor) {\n    if (shouldIgnoreKey(nodeType)) continue;\n\n    var parts = nodeType.split(\"|\");\n    if (parts.length === 1) continue;\n\n    var fns = visitor[nodeType];\n    delete visitor[nodeType];\n\n    for (var _iterator = parts, _isArray = Array.isArray(_iterator), _i = 0, _iterator = _isArray ? _iterator : (0, _getIterator3.default)(_iterator);;) {\n      var _ref;\n\n      if (_isArray) {\n        if (_i >= _iterator.length) break;\n        _ref = _iterator[_i++];\n      } else {\n        _i = _iterator.next();\n        if (_i.done) break;\n        _ref = _i.value;\n      }\n\n      var part = _ref;\n\n      visitor[part] = fns;\n    }\n  }\n\n  verify(visitor);\n\n  delete visitor.__esModule;\n\n  ensureEntranceObjects(visitor);\n\n  ensureCallbackArrays(visitor);\n\n  for (var _iterator2 = (0, _keys2.default)(visitor), _isArray2 = Array.isArray(_iterator2), _i2 = 0, _iterator2 = _isArray2 ? _iterator2 : (0, _getIterator3.default)(_iterator2);;) {\n    var _ref2;\n\n    if (_isArray2) {\n      if (_i2 >= _iterator2.length) break;\n      _ref2 = _iterator2[_i2++];\n    } else {\n      _i2 = _iterator2.next();\n      if (_i2.done) break;\n      _ref2 = _i2.value;\n    }\n\n    var _nodeType3 = _ref2;\n\n    if (shouldIgnoreKey(_nodeType3)) continue;\n\n    var wrapper = virtualTypes[_nodeType3];\n    if (!wrapper) continue;\n\n    var _fns2 = visitor[_nodeType3];\n    for (var type in _fns2) {\n      _fns2[type] = wrapCheck(wrapper, _fns2[type]);\n    }\n\n    delete visitor[_nodeType3];\n\n    if (wrapper.types) {\n      for (var _iterator4 = wrapper.types, _isArray4 = Array.isArray(_iterator4), _i4 = 0, _iterator4 = _isArray4 ? _iterator4 : (0, _getIterator3.default)(_iterator4);;) {\n        var _ref4;\n\n        if (_isArray4) {\n          if (_i4 >= _iterator4.length) break;\n          _ref4 = _iterator4[_i4++];\n        } else {\n          _i4 = _iterator4.next();\n          if (_i4.done) break;\n          _ref4 = _i4.value;\n        }\n\n        var _type = _ref4;\n\n        if (visitor[_type]) {\n          mergePair(visitor[_type], _fns2);\n        } else {\n          visitor[_type] = _fns2;\n        }\n      }\n    } else {\n      mergePair(visitor, _fns2);\n    }\n  }\n\n  for (var _nodeType in visitor) {\n    if (shouldIgnoreKey(_nodeType)) continue;\n\n    var _fns = visitor[_nodeType];\n\n    var aliases = t.FLIPPED_ALIAS_KEYS[_nodeType];\n\n    var deprecratedKey = t.DEPRECATED_KEYS[_nodeType];\n    if (deprecratedKey) {\n      console.trace(\"Visitor defined for \" + _nodeType + \" but it has been renamed to \" + deprecratedKey);\n      aliases = [deprecratedKey];\n    }\n\n    if (!aliases) continue;\n\n    delete visitor[_nodeType];\n\n    for (var _iterator3 = aliases, _isArray3 = Array.isArray(_iterator3), _i3 = 0, _iterator3 = _isArray3 ? _iterator3 : (0, _getIterator3.default)(_iterator3);;) {\n      var _ref3;\n\n      if (_isArray3) {\n        if (_i3 >= _iterator3.length) break;\n        _ref3 = _iterator3[_i3++];\n      } else {\n        _i3 = _iterator3.next();\n        if (_i3.done) break;\n        _ref3 = _i3.value;\n      }\n\n      var alias = _ref3;\n\n      var existing = visitor[alias];\n      if (existing) {\n        mergePair(existing, _fns);\n      } else {\n        visitor[alias] = (0, _clone2.default)(_fns);\n      }\n    }\n  }\n\n  for (var _nodeType2 in visitor) {\n    if (shouldIgnoreKey(_nodeType2)) continue;\n\n    ensureCallbackArrays(visitor[_nodeType2]);\n  }\n\n  return visitor;\n}\n\nfunction verify(visitor) {\n  if (visitor._verified) return;\n\n  if (typeof visitor === \"function\") {\n    throw new Error(messages.get(\"traverseVerifyRootFunction\"));\n  }\n\n  for (var nodeType in visitor) {\n    if (nodeType === \"enter\" || nodeType === \"exit\") {\n      validateVisitorMethods(nodeType, visitor[nodeType]);\n    }\n\n    if (shouldIgnoreKey(nodeType)) continue;\n\n    if (t.TYPES.indexOf(nodeType) < 0) {\n      throw new Error(messages.get(\"traverseVerifyNodeType\", nodeType));\n    }\n\n    var visitors = visitor[nodeType];\n    if ((typeof visitors === \"undefined\" ? \"undefined\" : (0, _typeof3.default)(visitors)) === \"object\") {\n      for (var visitorKey in visitors) {\n        if (visitorKey === \"enter\" || visitorKey === \"exit\") {\n          validateVisitorMethods(nodeType + \".\" + visitorKey, visitors[visitorKey]);\n        } else {\n          throw new Error(messages.get(\"traverseVerifyVisitorProperty\", nodeType, visitorKey));\n        }\n      }\n    }\n  }\n\n  visitor._verified = true;\n}\n\nfunction validateVisitorMethods(path, val) {\n  var fns = [].concat(val);\n  for (var _iterator5 = fns, _isArray5 = Array.isArray(_iterator5), _i5 = 0, _iterator5 = _isArray5 ? _iterator5 : (0, _getIterator3.default)(_iterator5);;) {\n    var _ref5;\n\n    if (_isArray5) {\n      if (_i5 >= _iterator5.length) break;\n      _ref5 = _iterator5[_i5++];\n    } else {\n      _i5 = _iterator5.next();\n      if (_i5.done) break;\n      _ref5 = _i5.value;\n    }\n\n    var fn = _ref5;\n\n    if (typeof fn !== \"function\") {\n      throw new TypeError(\"Non-function found defined in \" + path + \" with type \" + (typeof fn === \"undefined\" ? \"undefined\" : (0, _typeof3.default)(fn)));\n    }\n  }\n}\n\nfunction merge(visitors) {\n  var states = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];\n  var wrapper = arguments[2];\n\n  var rootVisitor = {};\n\n  for (var i = 0; i < visitors.length; i++) {\n    var visitor = visitors[i];\n    var state = states[i];\n\n    explode(visitor);\n\n    for (var type in visitor) {\n      var visitorType = visitor[type];\n\n      if (state || wrapper) {\n        visitorType = wrapWithStateOrWrapper(visitorType, state, wrapper);\n      }\n\n      var nodeVisitor = rootVisitor[type] = rootVisitor[type] || {};\n      mergePair(nodeVisitor, visitorType);\n    }\n  }\n\n  return rootVisitor;\n}\n\nfunction wrapWithStateOrWrapper(oldVisitor, state, wrapper) {\n  var newVisitor = {};\n\n  var _loop = function _loop(key) {\n    var fns = oldVisitor[key];\n\n    if (!Array.isArray(fns)) return \"continue\";\n\n    fns = fns.map(function (fn) {\n      var newFn = fn;\n\n      if (state) {\n        newFn = function newFn(path) {\n          return fn.call(state, path, state);\n        };\n      }\n\n      if (wrapper) {\n        newFn = wrapper(state.key, key, newFn);\n      }\n\n      return newFn;\n    });\n\n    newVisitor[key] = fns;\n  };\n\n  for (var key in oldVisitor) {\n    var _ret = _loop(key);\n\n    if (_ret === \"continue\") continue;\n  }\n\n  return newVisitor;\n}\n\nfunction ensureEntranceObjects(obj) {\n  for (var key in obj) {\n    if (shouldIgnoreKey(key)) continue;\n\n    var fns = obj[key];\n    if (typeof fns === \"function\") {\n      obj[key] = { enter: fns };\n    }\n  }\n}\n\nfunction ensureCallbackArrays(obj) {\n  if (obj.enter && !Array.isArray(obj.enter)) obj.enter = [obj.enter];\n  if (obj.exit && !Array.isArray(obj.exit)) obj.exit = [obj.exit];\n}\n\nfunction wrapCheck(wrapper, fn) {\n  var newFn = function newFn(path) {\n    if (wrapper.checkPath(path)) {\n      return fn.apply(this, arguments);\n    }\n  };\n  newFn.toString = function () {\n    return fn.toString();\n  };\n  return newFn;\n}\n\nfunction shouldIgnoreKey(key) {\n  if (key[0] === \"_\") return true;\n\n  if (key === \"enter\" || key === \"exit\" || key === \"shouldSkip\") return true;\n\n  if (key === \"blacklist\" || key === \"noScope\" || key === \"skipKeys\") return true;\n\n  return false;\n}\n\nfunction mergePair(dest, src) {\n  for (var key in src) {\n    dest[key] = [].concat(dest[key] || [], src[key]);\n  }\n}"]}