{"version":3,"sources":["../../../../../node_modules/babel-traverse/lib/path/context.js"],"names":["exports","__esModule","_getIterator2","require","_getIterator3","_interopRequireDefault","call","_call","isBlacklisted","visit","skip","skipKey","stop","setScope","setContext","resync","_resyncParent","_resyncKey","_resyncList","_resyncRemoved","popContext","pushContext","setup","setKey","requeue","_getQueueContexts","_index","_index2","obj","default","key","opts","debug","node","type","fns","_iterator","_isArray","Array","isArray","_i","_ref","length","next","done","value","fn","ret","state","Error","shouldStop","shouldSkip","removed","blacklist","indexOf","scope","skipKeys","noScope","target","context","path","parentPath","getScope","init","parent","container","i","inList","newContainer","listKey","_markRemoved","contexts","pop","push","parentKey","pathToQueue","arguments","undefined","_iterator2","_isArray2","_i2","_ref2","maybeQueue"],"mappings":"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","file":"context.js","sourcesContent":["\"use strict\";\n\nexports.__esModule = true;\n\nvar _getIterator2 = require(\"babel-runtime/core-js/get-iterator\");\n\nvar _getIterator3 = _interopRequireDefault(_getIterator2);\n\nexports.call = call;\nexports._call = _call;\nexports.isBlacklisted = isBlacklisted;\nexports.visit = visit;\nexports.skip = skip;\nexports.skipKey = skipKey;\nexports.stop = stop;\nexports.setScope = setScope;\nexports.setContext = setContext;\nexports.resync = resync;\nexports._resyncParent = _resyncParent;\nexports._resyncKey = _resyncKey;\nexports._resyncList = _resyncList;\nexports._resyncRemoved = _resyncRemoved;\nexports.popContext = popContext;\nexports.pushContext = pushContext;\nexports.setup = setup;\nexports.setKey = setKey;\nexports.requeue = requeue;\nexports._getQueueContexts = _getQueueContexts;\n\nvar _index = require(\"../index\");\n\nvar _index2 = _interopRequireDefault(_index);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction call(key) {\n  var opts = this.opts;\n\n  this.debug(function () {\n    return key;\n  });\n\n  if (this.node) {\n    if (this._call(opts[key])) return true;\n  }\n\n  if (this.node) {\n    return this._call(opts[this.node.type] && opts[this.node.type][key]);\n  }\n\n  return false;\n}\n\nfunction _call(fns) {\n  if (!fns) return false;\n\n  for (var _iterator = fns, _isArray = Array.isArray(_iterator), _i = 0, _iterator = _isArray ? _iterator : (0, _getIterator3.default)(_iterator);;) {\n    var _ref;\n\n    if (_isArray) {\n      if (_i >= _iterator.length) break;\n      _ref = _iterator[_i++];\n    } else {\n      _i = _iterator.next();\n      if (_i.done) break;\n      _ref = _i.value;\n    }\n\n    var fn = _ref;\n\n    if (!fn) continue;\n\n    var node = this.node;\n    if (!node) return true;\n\n    var ret = fn.call(this.state, this, this.state);\n    if (ret) throw new Error(\"Unexpected return value from visitor method \" + fn);\n\n    if (this.node !== node) return true;\n\n    if (this.shouldStop || this.shouldSkip || this.removed) return true;\n  }\n\n  return false;\n}\n\nfunction isBlacklisted() {\n  var blacklist = this.opts.blacklist;\n  return blacklist && blacklist.indexOf(this.node.type) > -1;\n}\n\nfunction visit() {\n  if (!this.node) {\n    return false;\n  }\n\n  if (this.isBlacklisted()) {\n    return false;\n  }\n\n  if (this.opts.shouldSkip && this.opts.shouldSkip(this)) {\n    return false;\n  }\n\n  if (this.call(\"enter\") || this.shouldSkip) {\n    this.debug(function () {\n      return \"Skip...\";\n    });\n    return this.shouldStop;\n  }\n\n  this.debug(function () {\n    return \"Recursing into...\";\n  });\n  _index2.default.node(this.node, this.opts, this.scope, this.state, this, this.skipKeys);\n\n  this.call(\"exit\");\n\n  return this.shouldStop;\n}\n\nfunction skip() {\n  this.shouldSkip = true;\n}\n\nfunction skipKey(key) {\n  this.skipKeys[key] = true;\n}\n\nfunction stop() {\n  this.shouldStop = true;\n  this.shouldSkip = true;\n}\n\nfunction setScope() {\n  if (this.opts && this.opts.noScope) return;\n\n  var target = this.context && this.context.scope;\n\n  if (!target) {\n    var path = this.parentPath;\n    while (path && !target) {\n      if (path.opts && path.opts.noScope) return;\n\n      target = path.scope;\n      path = path.parentPath;\n    }\n  }\n\n  this.scope = this.getScope(target);\n  if (this.scope) this.scope.init();\n}\n\nfunction setContext(context) {\n  this.shouldSkip = false;\n  this.shouldStop = false;\n  this.removed = false;\n  this.skipKeys = {};\n\n  if (context) {\n    this.context = context;\n    this.state = context.state;\n    this.opts = context.opts;\n  }\n\n  this.setScope();\n\n  return this;\n}\n\nfunction resync() {\n  if (this.removed) return;\n\n  this._resyncParent();\n  this._resyncList();\n  this._resyncKey();\n}\n\nfunction _resyncParent() {\n  if (this.parentPath) {\n    this.parent = this.parentPath.node;\n  }\n}\n\nfunction _resyncKey() {\n  if (!this.container) return;\n\n  if (this.node === this.container[this.key]) return;\n\n  if (Array.isArray(this.container)) {\n    for (var i = 0; i < this.container.length; i++) {\n      if (this.container[i] === this.node) {\n        return this.setKey(i);\n      }\n    }\n  } else {\n    for (var key in this.container) {\n      if (this.container[key] === this.node) {\n        return this.setKey(key);\n      }\n    }\n  }\n\n  this.key = null;\n}\n\nfunction _resyncList() {\n  if (!this.parent || !this.inList) return;\n\n  var newContainer = this.parent[this.listKey];\n  if (this.container === newContainer) return;\n\n  this.container = newContainer || null;\n}\n\nfunction _resyncRemoved() {\n  if (this.key == null || !this.container || this.container[this.key] !== this.node) {\n    this._markRemoved();\n  }\n}\n\nfunction popContext() {\n  this.contexts.pop();\n  this.setContext(this.contexts[this.contexts.length - 1]);\n}\n\nfunction pushContext(context) {\n  this.contexts.push(context);\n  this.setContext(context);\n}\n\nfunction setup(parentPath, container, listKey, key) {\n  this.inList = !!listKey;\n  this.listKey = listKey;\n  this.parentKey = listKey || key;\n  this.container = container;\n\n  this.parentPath = parentPath || this.parentPath;\n  this.setKey(key);\n}\n\nfunction setKey(key) {\n  this.key = key;\n  this.node = this.container[this.key];\n  this.type = this.node && this.node.type;\n}\n\nfunction requeue() {\n  var pathToQueue = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this;\n\n  if (pathToQueue.removed) return;\n\n  var contexts = this.contexts;\n\n  for (var _iterator2 = contexts, _isArray2 = Array.isArray(_iterator2), _i2 = 0, _iterator2 = _isArray2 ? _iterator2 : (0, _getIterator3.default)(_iterator2);;) {\n    var _ref2;\n\n    if (_isArray2) {\n      if (_i2 >= _iterator2.length) break;\n      _ref2 = _iterator2[_i2++];\n    } else {\n      _i2 = _iterator2.next();\n      if (_i2.done) break;\n      _ref2 = _i2.value;\n    }\n\n    var context = _ref2;\n\n    context.maybeQueue(pathToQueue);\n  }\n}\n\nfunction _getQueueContexts() {\n  var path = this;\n  var contexts = this.contexts;\n  while (!contexts.length) {\n    path = path.parentPath;\n    contexts = path.contexts;\n  }\n  return contexts;\n}"]}