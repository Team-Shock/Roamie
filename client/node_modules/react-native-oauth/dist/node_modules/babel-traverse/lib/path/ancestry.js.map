{"version":3,"sources":["../../../../../node_modules/babel-traverse/lib/path/ancestry.js"],"names":["exports","__esModule","_getIterator2","require","_getIterator3","_interopRequireDefault","findParent","find","getFunctionParent","getStatementParent","getEarliestCommonAncestorFrom","getDeepestCommonAncestorFrom","getAncestry","isAncestor","isDescendant","inType","inShadow","_babelTypes","t","_interopRequireWildcard","_index","_index2","obj","newObj","key","Object","prototype","hasOwnProperty","call","default","callback","path","parentPath","isFunction","isProgram","Array","isArray","container","paths","deepest","i","ancestries","earliest","keys","VISITOR_KEYS","type","_iterator","_isArray","_i","_ref","length","next","done","value","ancestry","listKey","earliestKeyIndex","indexOf","parentKey","currentKeyIndex","filter","_this","minDepth","Infinity","lastCommonIndex","lastCommon","map","unshift","first","depthLoop","shouldMatch","_iterator2","_isArray2","_i2","_ref2","Error","push","maybeDescendant","maybeAncestor","parent","_iterator3","arguments","_isArray3","_i3","_ref3","node","parentFn","p","isFunctionExpression","isFunctionDeclaration","shadow","isArrowFunctionExpression"],"mappings":"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","file":"ancestry.js","sourcesContent":["\"use strict\";\n\nexports.__esModule = true;\n\nvar _getIterator2 = require(\"babel-runtime/core-js/get-iterator\");\n\nvar _getIterator3 = _interopRequireDefault(_getIterator2);\n\nexports.findParent = findParent;\nexports.find = find;\nexports.getFunctionParent = getFunctionParent;\nexports.getStatementParent = getStatementParent;\nexports.getEarliestCommonAncestorFrom = getEarliestCommonAncestorFrom;\nexports.getDeepestCommonAncestorFrom = getDeepestCommonAncestorFrom;\nexports.getAncestry = getAncestry;\nexports.isAncestor = isAncestor;\nexports.isDescendant = isDescendant;\nexports.inType = inType;\nexports.inShadow = inShadow;\n\nvar _babelTypes = require(\"babel-types\");\n\nvar t = _interopRequireWildcard(_babelTypes);\n\nvar _index = require(\"./index\");\n\nvar _index2 = _interopRequireDefault(_index);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction findParent(callback) {\n  var path = this;\n  while (path = path.parentPath) {\n    if (callback(path)) return path;\n  }\n  return null;\n}\n\nfunction find(callback) {\n  var path = this;\n  do {\n    if (callback(path)) return path;\n  } while (path = path.parentPath);\n  return null;\n}\n\nfunction getFunctionParent() {\n  return this.findParent(function (path) {\n    return path.isFunction() || path.isProgram();\n  });\n}\n\nfunction getStatementParent() {\n  var path = this;\n  do {\n    if (Array.isArray(path.container)) {\n      return path;\n    }\n  } while (path = path.parentPath);\n}\n\nfunction getEarliestCommonAncestorFrom(paths) {\n  return this.getDeepestCommonAncestorFrom(paths, function (deepest, i, ancestries) {\n    var earliest = void 0;\n    var keys = t.VISITOR_KEYS[deepest.type];\n\n    for (var _iterator = ancestries, _isArray = Array.isArray(_iterator), _i = 0, _iterator = _isArray ? _iterator : (0, _getIterator3.default)(_iterator);;) {\n      var _ref;\n\n      if (_isArray) {\n        if (_i >= _iterator.length) break;\n        _ref = _iterator[_i++];\n      } else {\n        _i = _iterator.next();\n        if (_i.done) break;\n        _ref = _i.value;\n      }\n\n      var ancestry = _ref;\n\n      var path = ancestry[i + 1];\n\n      if (!earliest) {\n        earliest = path;\n        continue;\n      }\n\n      if (path.listKey && earliest.listKey === path.listKey) {\n        if (path.key < earliest.key) {\n          earliest = path;\n          continue;\n        }\n      }\n\n      var earliestKeyIndex = keys.indexOf(earliest.parentKey);\n      var currentKeyIndex = keys.indexOf(path.parentKey);\n      if (earliestKeyIndex > currentKeyIndex) {\n        earliest = path;\n      }\n    }\n\n    return earliest;\n  });\n}\n\nfunction getDeepestCommonAncestorFrom(paths, filter) {\n  var _this = this;\n\n  if (!paths.length) {\n    return this;\n  }\n\n  if (paths.length === 1) {\n    return paths[0];\n  }\n\n  var minDepth = Infinity;\n\n  var lastCommonIndex = void 0,\n      lastCommon = void 0;\n\n  var ancestries = paths.map(function (path) {\n    var ancestry = [];\n\n    do {\n      ancestry.unshift(path);\n    } while ((path = path.parentPath) && path !== _this);\n\n    if (ancestry.length < minDepth) {\n      minDepth = ancestry.length;\n    }\n\n    return ancestry;\n  });\n\n  var first = ancestries[0];\n\n  depthLoop: for (var i = 0; i < minDepth; i++) {\n    var shouldMatch = first[i];\n\n    for (var _iterator2 = ancestries, _isArray2 = Array.isArray(_iterator2), _i2 = 0, _iterator2 = _isArray2 ? _iterator2 : (0, _getIterator3.default)(_iterator2);;) {\n      var _ref2;\n\n      if (_isArray2) {\n        if (_i2 >= _iterator2.length) break;\n        _ref2 = _iterator2[_i2++];\n      } else {\n        _i2 = _iterator2.next();\n        if (_i2.done) break;\n        _ref2 = _i2.value;\n      }\n\n      var ancestry = _ref2;\n\n      if (ancestry[i] !== shouldMatch) {\n        break depthLoop;\n      }\n    }\n\n    lastCommonIndex = i;\n    lastCommon = shouldMatch;\n  }\n\n  if (lastCommon) {\n    if (filter) {\n      return filter(lastCommon, lastCommonIndex, ancestries);\n    } else {\n      return lastCommon;\n    }\n  } else {\n    throw new Error(\"Couldn't find intersection\");\n  }\n}\n\nfunction getAncestry() {\n  var path = this;\n  var paths = [];\n  do {\n    paths.push(path);\n  } while (path = path.parentPath);\n  return paths;\n}\n\nfunction isAncestor(maybeDescendant) {\n  return maybeDescendant.isDescendant(this);\n}\n\nfunction isDescendant(maybeAncestor) {\n  return !!this.findParent(function (parent) {\n    return parent === maybeAncestor;\n  });\n}\n\nfunction inType() {\n  var path = this;\n  while (path) {\n    for (var _iterator3 = arguments, _isArray3 = Array.isArray(_iterator3), _i3 = 0, _iterator3 = _isArray3 ? _iterator3 : (0, _getIterator3.default)(_iterator3);;) {\n      var _ref3;\n\n      if (_isArray3) {\n        if (_i3 >= _iterator3.length) break;\n        _ref3 = _iterator3[_i3++];\n      } else {\n        _i3 = _iterator3.next();\n        if (_i3.done) break;\n        _ref3 = _i3.value;\n      }\n\n      var type = _ref3;\n\n      if (path.node.type === type) return true;\n    }\n    path = path.parentPath;\n  }\n\n  return false;\n}\n\nfunction inShadow(key) {\n  var parentFn = this.isFunction() ? this : this.findParent(function (p) {\n    return p.isFunction();\n  });\n  if (!parentFn) return;\n\n  if (parentFn.isFunctionExpression() || parentFn.isFunctionDeclaration()) {\n    var shadow = parentFn.node.shadow;\n\n    if (shadow && (!key || shadow[key] !== false)) {\n      return parentFn;\n    }\n  } else if (parentFn.isArrowFunctionExpression()) {\n    return parentFn;\n  }\n\n  return null;\n}"]}