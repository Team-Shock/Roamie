{"version":3,"sources":["../../../../node_modules/babel-traverse/lib/context.js"],"names":["exports","__esModule","_getIterator2","require","_getIterator3","_interopRequireDefault","_classCallCheck2","_classCallCheck3","_path2","_path3","_babelTypes","t","_interopRequireWildcard","obj","newObj","key","Object","prototype","hasOwnProperty","call","default","testing","process","env","NODE_ENV","TraversalContext","scope","opts","state","parentPath","queue","shouldVisit","node","enter","exit","type","keys","VISITOR_KEYS","length","_iterator","_isArray","Array","isArray","_i","_ref","next","done","value","create","listKey","get","parent","container","maybeQueue","path","notPriority","trap","Error","push","priorityQueue","visitMultiple","visitQueue","visitSingle","visited","stop","_iterator2","_isArray2","_i2","_ref2","resync","contexts","pushContext","indexOf","visit","_iterator3","_isArray3","_i3","_ref3","_path","popContext","nodes","module"],"mappings":"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","file":"context.js","sourcesContent":["\"use strict\";\n\nexports.__esModule = true;\n\nvar _getIterator2 = require(\"babel-runtime/core-js/get-iterator\");\n\nvar _getIterator3 = _interopRequireDefault(_getIterator2);\n\nvar _classCallCheck2 = require(\"babel-runtime/helpers/classCallCheck\");\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _path2 = require(\"./path\");\n\nvar _path3 = _interopRequireDefault(_path2);\n\nvar _babelTypes = require(\"babel-types\");\n\nvar t = _interopRequireWildcard(_babelTypes);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar testing = process.env.NODE_ENV === \"test\";\n\nvar TraversalContext = function () {\n  function TraversalContext(scope, opts, state, parentPath) {\n    (0, _classCallCheck3.default)(this, TraversalContext);\n    this.queue = null;\n\n    this.parentPath = parentPath;\n    this.scope = scope;\n    this.state = state;\n    this.opts = opts;\n  }\n\n  TraversalContext.prototype.shouldVisit = function shouldVisit(node) {\n    var opts = this.opts;\n    if (opts.enter || opts.exit) return true;\n\n    if (opts[node.type]) return true;\n\n    var keys = t.VISITOR_KEYS[node.type];\n    if (!keys || !keys.length) return false;\n\n    for (var _iterator = keys, _isArray = Array.isArray(_iterator), _i = 0, _iterator = _isArray ? _iterator : (0, _getIterator3.default)(_iterator);;) {\n      var _ref;\n\n      if (_isArray) {\n        if (_i >= _iterator.length) break;\n        _ref = _iterator[_i++];\n      } else {\n        _i = _iterator.next();\n        if (_i.done) break;\n        _ref = _i.value;\n      }\n\n      var key = _ref;\n\n      if (node[key]) return true;\n    }\n\n    return false;\n  };\n\n  TraversalContext.prototype.create = function create(node, obj, key, listKey) {\n    return _path3.default.get({\n      parentPath: this.parentPath,\n      parent: node,\n      container: obj,\n      key: key,\n      listKey: listKey\n    });\n  };\n\n  TraversalContext.prototype.maybeQueue = function maybeQueue(path, notPriority) {\n    if (this.trap) {\n      throw new Error(\"Infinite cycle detected\");\n    }\n\n    if (this.queue) {\n      if (notPriority) {\n        this.queue.push(path);\n      } else {\n        this.priorityQueue.push(path);\n      }\n    }\n  };\n\n  TraversalContext.prototype.visitMultiple = function visitMultiple(container, parent, listKey) {\n    if (container.length === 0) return false;\n\n    var queue = [];\n\n    for (var key = 0; key < container.length; key++) {\n      var node = container[key];\n      if (node && this.shouldVisit(node)) {\n        queue.push(this.create(parent, container, key, listKey));\n      }\n    }\n\n    return this.visitQueue(queue);\n  };\n\n  TraversalContext.prototype.visitSingle = function visitSingle(node, key) {\n    if (this.shouldVisit(node[key])) {\n      return this.visitQueue([this.create(node, node, key)]);\n    } else {\n      return false;\n    }\n  };\n\n  TraversalContext.prototype.visitQueue = function visitQueue(queue) {\n    this.queue = queue;\n    this.priorityQueue = [];\n\n    var visited = [];\n    var stop = false;\n\n    for (var _iterator2 = queue, _isArray2 = Array.isArray(_iterator2), _i2 = 0, _iterator2 = _isArray2 ? _iterator2 : (0, _getIterator3.default)(_iterator2);;) {\n      var _ref2;\n\n      if (_isArray2) {\n        if (_i2 >= _iterator2.length) break;\n        _ref2 = _iterator2[_i2++];\n      } else {\n        _i2 = _iterator2.next();\n        if (_i2.done) break;\n        _ref2 = _i2.value;\n      }\n\n      var path = _ref2;\n\n      path.resync();\n\n      if (path.contexts.length === 0 || path.contexts[path.contexts.length - 1] !== this) {\n        path.pushContext(this);\n      }\n\n      if (path.key === null) continue;\n\n      if (testing && queue.length >= 10000) {\n        this.trap = true;\n      }\n\n      if (visited.indexOf(path.node) >= 0) continue;\n      visited.push(path.node);\n\n      if (path.visit()) {\n        stop = true;\n        break;\n      }\n\n      if (this.priorityQueue.length) {\n        stop = this.visitQueue(this.priorityQueue);\n        this.priorityQueue = [];\n        this.queue = queue;\n        if (stop) break;\n      }\n    }\n\n    for (var _iterator3 = queue, _isArray3 = Array.isArray(_iterator3), _i3 = 0, _iterator3 = _isArray3 ? _iterator3 : (0, _getIterator3.default)(_iterator3);;) {\n      var _ref3;\n\n      if (_isArray3) {\n        if (_i3 >= _iterator3.length) break;\n        _ref3 = _iterator3[_i3++];\n      } else {\n        _i3 = _iterator3.next();\n        if (_i3.done) break;\n        _ref3 = _i3.value;\n      }\n\n      var _path = _ref3;\n\n      _path.popContext();\n    }\n\n    this.queue = null;\n\n    return stop;\n  };\n\n  TraversalContext.prototype.visit = function visit(node, key) {\n    var nodes = node[key];\n    if (!nodes) return false;\n\n    if (Array.isArray(nodes)) {\n      return this.visitMultiple(nodes, node, key);\n    } else {\n      return this.visitSingle(node, key);\n    }\n  };\n\n  return TraversalContext;\n}();\n\nexports.default = TraversalContext;\nmodule.exports = exports[\"default\"];"]}