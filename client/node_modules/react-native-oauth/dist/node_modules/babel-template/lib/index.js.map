{"version":3,"sources":["../../../../node_modules/babel-template/lib/index.js"],"names":["exports","__esModule","_symbol","require","_symbol2","_interopRequireDefault","default","code","opts","stack","Error","error","split","slice","join","_assign2","allowReturnOutsideFunction","allowSuperOutsideMethod","preserveComments","_getAst","getAst","ast","babylon","parse","_babelTraverse2","removeProperties","cheap","node","FROM_TEMPLATE","err","_len","arguments","length","args","Array","_key","useTemplate","_cloneDeep","_cloneDeep2","_assign","_has","_has2","_babelTraverse","_babylon","_interopRequireWildcard","_babelTypes","t","obj","newObj","key","Object","prototype","hasOwnProperty","call","TEMPLATE_SKIP","nodes","_ast","program","templateVisitor","body","noScope","enter","path","skip","isExpressionStatement","expression","replacement","isIdentifier","name","i","remove","replaceInline","exit","_ref","loc","clearNode","module"],"mappings":"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","file":"index.js","sourcesContent":["\"use strict\";\n\nexports.__esModule = true;\n\nvar _symbol = require(\"babel-runtime/core-js/symbol\");\n\nvar _symbol2 = _interopRequireDefault(_symbol);\n\nexports.default = function (code, opts) {\n  var stack = void 0;\n  try {\n    throw new Error();\n  } catch (error) {\n    if (error.stack) {\n      stack = error.stack.split(\"\\n\").slice(1).join(\"\\n\");\n    }\n  }\n\n  opts = (0, _assign2.default)({\n    allowReturnOutsideFunction: true,\n    allowSuperOutsideMethod: true,\n    preserveComments: false\n  }, opts);\n\n  var _getAst = function getAst() {\n    var ast = void 0;\n\n    try {\n      ast = babylon.parse(code, opts);\n\n      ast = _babelTraverse2.default.removeProperties(ast, { preserveComments: opts.preserveComments });\n\n      _babelTraverse2.default.cheap(ast, function (node) {\n        node[FROM_TEMPLATE] = true;\n      });\n    } catch (err) {\n      err.stack = err.stack + \"from\\n\" + stack;\n      throw err;\n    }\n\n    _getAst = function getAst() {\n      return ast;\n    };\n\n    return ast;\n  };\n\n  return function () {\n    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    return useTemplate(_getAst(), args);\n  };\n};\n\nvar _cloneDeep = require(\"lodash/cloneDeep\");\n\nvar _cloneDeep2 = _interopRequireDefault(_cloneDeep);\n\nvar _assign = require(\"lodash/assign\");\n\nvar _assign2 = _interopRequireDefault(_assign);\n\nvar _has = require(\"lodash/has\");\n\nvar _has2 = _interopRequireDefault(_has);\n\nvar _babelTraverse = require(\"babel-traverse\");\n\nvar _babelTraverse2 = _interopRequireDefault(_babelTraverse);\n\nvar _babylon = require(\"babylon\");\n\nvar babylon = _interopRequireWildcard(_babylon);\n\nvar _babelTypes = require(\"babel-types\");\n\nvar t = _interopRequireWildcard(_babelTypes);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar FROM_TEMPLATE = \"_fromTemplate\";\nvar TEMPLATE_SKIP = (0, _symbol2.default)();\n\nfunction useTemplate(ast, nodes) {\n  ast = (0, _cloneDeep2.default)(ast);\n  var _ast = ast,\n      program = _ast.program;\n\n\n  if (nodes.length) {\n    (0, _babelTraverse2.default)(ast, templateVisitor, null, nodes);\n  }\n\n  if (program.body.length > 1) {\n    return program.body;\n  } else {\n    return program.body[0];\n  }\n}\n\nvar templateVisitor = {\n  noScope: true,\n\n  enter: function enter(path, args) {\n    var node = path.node;\n\n    if (node[TEMPLATE_SKIP]) return path.skip();\n\n    if (t.isExpressionStatement(node)) {\n      node = node.expression;\n    }\n\n    var replacement = void 0;\n\n    if (t.isIdentifier(node) && node[FROM_TEMPLATE]) {\n      if ((0, _has2.default)(args[0], node.name)) {\n        replacement = args[0][node.name];\n      } else if (node.name[0] === \"$\") {\n        var i = +node.name.slice(1);\n        if (args[i]) replacement = args[i];\n      }\n    }\n\n    if (replacement === null) {\n      path.remove();\n    }\n\n    if (replacement) {\n      replacement[TEMPLATE_SKIP] = true;\n      path.replaceInline(replacement);\n    }\n  },\n  exit: function exit(_ref) {\n    var node = _ref.node;\n\n    if (!node.loc) _babelTraverse2.default.clearNode(node);\n  }\n};\nmodule.exports = exports[\"default\"];"]}